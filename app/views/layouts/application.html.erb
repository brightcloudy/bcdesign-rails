<!DOCTYPE html>
<html>
<head>
  <title><%= full_title(yield(:title)) %></title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <% if current_page?('/google_authenticate/new') %>
    <%= stylesheet_link_tag 'google_authenticate', media: 'all', 'data-turbolinks-track' => true %>
  <% end %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
  <nav class="navbar navbar-default navbar-static-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <%= link_to site_name, site_url, :class => "navbar-brand" %>
      </div>
      <ul class="nav navbar-nav">
        <li class="<%= 'active' if current_page?(root_path) %>"><%= link_to "Home", root_path %></li>
        <li class="<%= 'active' if current_page?(projects_path) %>"><%= link_to "Projects", projects_path %></li>
        <li class="<%= 'active' if current_page?(contact_path) %>"> <%= link_to "Contact", contact_path %></li>
      </ul>
      <% if admin_signed_in? %>
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Administration<span class="caret"></span></a>
            <ul class="dropdown-menu">
              <% if is_superadmin?(current_admin) %>
                <li><%= link_to "New Project", '/projects/new' %></li>
                <li><%= link_to "View Users", '/admin' %></li>
                <li role="separator" class="divider"></li>
              <% end %>
              <li><%= link_to "Manage 2FA", '/admins/displayqr' %></li>
              <li><%= link_to "Edit Account", '/admins/edit' %></li>
            </ul>
          </li>
        </ul>
      <% end %>
    </div>
  </nav>
  <% if flash[:notice] %>
    <div class="alert alert-info alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <%= flash[:notice] %>
    </div>
  <% end %>
  <% if flash[:success] %>
    <div class="alert alert-success alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <%= flash[:success] %>
    </div>
  <% end %>
  <% if flash[:alert] %>
    <div class="alert alert-warning alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <%= flash[:alert] %>
    </div>
  <% end %>
  <% if flash[:error] %>
    <div class="alert alert-danger alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <%= flash[:error] %>
    </div>
  <% end %>
  <% if current_page?(root_path) %>
    <% if content_for?(:jumbotron) %>
      <div class="jumbotron">
        <div class="container push-spaces">
          <%= yield :jumbotron %>
        </div>
      </div>
    <% end %>
  <% end %>
  <div class="container">
    <%= yield %>
  </div>
  <br>
  <nav class="navbar navbar-default navbar-fixed-bottom">
    <div class="container-fluid">
      <ul class="nav navbar-nav navbar-right">
        <% if admin_signed_in? %>
          <li><%= link_to "Logout", '/admins/sign_out', :method => :delete%></li>
        <% else %>
          <li><%= link_to "Login", '/admins/sign_in' %></li>
        <% end %>
      </ul>
    </div>
  </nav>
</body>
</html>
